## Milestone: Members — Admin Pages

> **Validates:**
> - Frontend `/members` (authenticated) renders an element with `data-testid="members-heading"`
> - Frontend `/members/new` renders inputs with `data-testid="first-name-input"`, `data-testid="last-name-input"`, `data-testid="email-input"` and a `data-testid="submit-button"`

> **Reference files:**
> - `src/Stretto.Web/src/pages/VenuesListPage.tsx` — Tanstack Query list page pattern
> - `src/Stretto.Web/src/pages/VenueFormPage.tsx` — React Hook Form + Zod create/edit form pattern
> - `src/Stretto.Web/src/App.tsx` — replace `/members` placeholder and add nested routes here

- [x] Regenerate the TypeScript API client: start the backend with `dotnet run --project src/Stretto.Api/ -- --urls http://localhost:5000`, wait for it to be reachable at `http://localhost:5000/swagger/v1/swagger.json`, run `npm run generate` from `src/Stretto.Web/`, then commit the updated files in `src/Stretto.Web/src/api/generated/`

- [x] Create `src/Stretto.Web/src/pages/MembersListPage.tsx`; import `useState` from `react`; import `useQuery` from `@tanstack/react-query`; import `Link` from `react-router-dom`; import `AppShell`; add local `search` state with `useState('')`; `useQuery({ queryKey: ['members', search], queryFn: () => fetch(`/api/members${search ? `?search=${encodeURIComponent(search)}` : ''}`, { credentials: 'include' }).then(r => r.json()) })`; render inside `<AppShell>`: `<h1 data-testid="members-heading">Members</h1>`, a `<Link to="/members/new" data-testid="add-member-button">Add Member</Link>` styled as a button, an `<input type="search" data-testid="search-input" placeholder="Search members…" value={search} onChange={e => setSearch(e.target.value)} />`, and a table where each row shows full name (`{m.firstName} {m.lastName}`), email, role, a status badge `<span data-testid={`status-badge-${m.id}`} className={m.isActive ? 'text-green-600' : 'text-muted-foreground'}>{m.isActive ? 'Active' : 'Inactive'}</span>`, a `<Link to={`/members/${m.id}`} data-testid={`view-${m.id}`}>View</Link>`, and a `<Link to={`/members/${m.id}/edit`} data-testid={`edit-${m.id}`}>Edit</Link>`

- [ ] Create `src/Stretto.Web/src/pages/MemberFormPage.tsx`; read `id` from `useParams<{ id: string }>()`; `isEdit = Boolean(id)`; Zod schema for create: `z.object({ firstName: z.string().min(1,'First name is required'), lastName: z.string().min(1,'Last name is required'), email: z.string().email('Valid email required'), role: z.enum(['Admin','Member']) })`; for edit extend with `isActive: z.boolean()`; use separate schemas and `z.infer` to derive `CreateFormValues` and `EditFormValues`; when `isEdit`, fetch `/api/members/${id}` and call `reset(data)` via `useEffect`; `useMutation` that POSTs to `/api/members` or PUTs to `/api/members/${id}`, checks `response.ok` (throws `new Error(...)` on failure), navigates to `/members/${dto.id ?? id}` on success; render inside `<AppShell>`: heading `<h1>{isEdit ? 'Edit Member' : 'Add Member'}</h1>`, form with `<input data-testid="first-name-input" {...register('firstName')} />`, `<input data-testid="last-name-input" {...register('lastName')} />`, `<input data-testid="email-input" {...register('email')} />`, `<select data-testid="role-select" {...register('role')}><option value="Admin">Admin</option><option value="Member">Member</option></select>`, and when `isEdit`: `<input type="checkbox" data-testid="is-active-checkbox" {...register('isActive')} />`; display `formState.errors` inline below each field; `<button type="submit" data-testid="submit-button" disabled={isSubmitting}>{isEdit ? 'Save' : 'Add Member'}</button>`; display `{mutation.isError && <p data-testid="form-error">{(mutation.error as Error).message}</p>}` above the button

- [ ] Create `src/Stretto.Web/src/pages/MemberProfilePage.tsx`; read `id` from `useParams<{ id: string }>()`; two queries: member detail `useQuery({ queryKey: ['member', id], queryFn: () => fetch(`/api/members/${id}`, { credentials: 'include' }).then(r => r.json()) })` and assignments `useQuery({ queryKey: ['member-assignments', id], queryFn: () => fetch(`/api/members/${id}/assignments`, { credentials: 'include' }).then(r => r.json()) })`; render inside `<AppShell>`: `<h1 data-testid="member-name">{member?.firstName} {member?.lastName}</h1>`, member email and role, a status badge `<span data-testid="status-badge">{member?.isActive ? 'Active' : 'Inactive'}</span>`, a `<Link to={`/members/${id}/edit`} data-testid="edit-link">Edit</Link>`, a section with `<h2 data-testid="assignments-heading">Projects</h2>` and either a `<ul>` where each item is `<li key={a.projectId} data-testid={`assignment-${a.projectId}`}>{a.projectName}</li>` or a `<p data-testid="no-assignments">No projects assigned</p>` when the assignments array is empty

- [ ] Update `src/Stretto.Web/src/App.tsx`: add imports for `MembersListPage`, `MemberFormPage`, `MemberProfilePage`; replace `<Route path="/members" element={<ComingSoon />} />` with `<Route path="/members" element={<MembersListPage />} />`; add inside the `<Route element={<ProtectedRoute />}>` block: `<Route path="/members/new" element={<MemberFormPage />} />`, `<Route path="/members/:id/edit" element={<MemberFormPage />} />`, `<Route path="/members/:id" element={<MemberProfilePage />} />`
